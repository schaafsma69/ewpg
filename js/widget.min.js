if("undefined"==typeof config){var config={};"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json")}var RiseVision=RiseVision||{};RiseVision.WebPage={},RiseVision.WebPage=function(e,t){"use strict";function n(){var t,n,a,o=e.getElementById("webpage-container"),r=e.getElementById("webpage-frame"),i=d.getInt("rsH")/d.getInt("rsW")*100,s=m.scrollHorizontal>0?m.scrollHorizontal:0,l=m.scrollVertical>0?m.scrollVertical:0,c=parseFloat(m.zoom);o&&r&&(t=o.getElementsByClassName("blocker")[0],o.style.visibility="hidden",0!==l&&(i+=l/d.getInt("rsW")*100),o.setAttribute("style","padding-bottom:"+i+"%"),t.style.display=m.interactive?"none":"block",r.setAttribute("scrolling",m.scrollbars?"yes":"no"),n="-ms-zoom:"+c+";-moz-transform: scale("+c+");-moz-transform-origin: 0 0;-o-transform: scale("+c+");-o-transform-origin: 0 0;-webkit-transform: scale("+c+");-webkit-transform-origin: 0 0;",n+="width: "+1/c*100+"%;height: "+1/c*100+"%;",r.setAttribute("style",n),(0!==s||0!==l)&&(a="margin: -"+l+"px 0 0 -"+s+"px;",r.setAttribute("style",n+a)))}function a(){var t=e.getElementById("webpage-frame"),n=e.getElementById("webpage-container"),o=/[?#&]/.test(f),r=Math.ceil(100*Math.random()),i=o?f+"&dummyVar="+r:f+"?dummyVar="+r;n&&t&&(t.onload=function(){t.onload=null,n.style.visibility="visible",m.refresh>0&&null===b&&(b=setInterval(function(){a()},m.refresh))},t.setAttribute("src",i))}function o(){jQuery("#webpage-frame").css({top:0,left:0});var e=m.scrollHorizontalEnd>0?m.scrollHorizontalEnd:0,t=m.scrollVerticalEnd>0?m.scrollVerticalEnd:0,n=m.scrollDuration>0?m.scrollDuration:0,a=m.scrollTimeoutStart>0?m.scrollTimeoutStart:0;m.animated&&(e>0||t>0)&&(e="-="+e,t="-="+t,a>0?jQuery("#webpage-frame").delay(a).animate({top:t,left:e},n):jQuery("#webpage-frame").animate({top:t,left:e},n))}function r(){var t=e.getElementById("webpage-frame");m.refresh>0&&clearInterval(b),t&&(t.src="about:blank")}function i(){t.rpc.call("","rsevent_ready",null,d.getString("id"),!0,!0,!0,!0,!1)}function s(){f=m.url,-1===f.indexOf("://")&&(f="http://"+f),n(),i()}function l(){r()}function c(){a(),o()}function u(){r()}function g(e){d=new t.Prefs,m=e,p=new RiseVision.Common.Background(m),p.init(s)}var d=null,m={},f="",b=null,p=null;return{setAdditionalParams:g,pause:l,play:c,stop:u}}(document,gadgets);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Background=function(e){"use strict";function t(){setTimeout(function(){s.style.backgroundImage="url("+e.background.image.url+g+"cb="+(new Date).getTime()+")",t()},c)}function n(){i=!0,e.background.useImage&&!u&&t(),r&&"function"==typeof r&&r()}function a(){var t;s=document.getElementById("background"),l=document.getElementById("backgroundStorage"),document.body.style.background=e.background.color,s?e.background.useImage?(s.className=e.background.image.position,s.className=e.background.image.scale?s.className+" scale-to-fit":s.className,u=0!==Object.keys(e.backgroundStorage).length,u?l?(l.addEventListener("rise-storage-response",function(e){e.detail&&e.detail.files&&e.detail.files.length>0&&(s.style.backgroundImage="url("+e.detail.files[0].url+")"),i||n()}),l.setAttribute("folder",e.backgroundStorage.folder),l.setAttribute("fileName",e.backgroundStorage.fileName),l.setAttribute("companyId",e.backgroundStorage.companyId),l.go()):console.log("Missing element with id value of 'backgroundStorage'"):(t=e.background.image.url.split("?"),g=1===t.length?"?":"&",s.style.backgroundImage="url("+e.background.image.url+")",n())):n():console.log("Missing element with id value of 'background'")}function o(e){i?e&&"function"==typeof e&&e():(e&&(r=e),a())}var r=null,i=!1,s=null,l=null,c=9e5,u=!1,g="";return{init:o}},function(e,t){"use strict";function n(){RiseVision.WebPage.play()}function a(){RiseVision.WebPage.pause()}function o(){RiseVision.WebPage.stop()}function r(e,t){Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(t)&&t.length>0&&RiseVision.WebPage.setAdditionalParams(JSON.parse(t[0]))}var i=new t.Prefs,s=i.getString("id");e.oncontextmenu=function(){return!1},e.addEventListener("polymer-ready",function(){s&&""!==s&&(t.rpc.register("rscmd_play_"+s,n),t.rpc.register("rscmd_pause_"+s,a),t.rpc.register("rscmd_stop_"+s,o),t.rpc.register("rsparam_set_"+s,r),t.rpc.call("","rsparam_get",null,s,["additionalParams"]))})}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-6"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiY29uZmlnIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwiUmlzZVZpc2lvbiIsIldlYlBhZ2UiLCJkb2N1bWVudCIsImdhZGdldHMiLCJfY29uZmlndXJlUGFnZSIsImJsb2NrZXIiLCJ6b29tU3R5bGUiLCJtYXJnaW5TdHlsZSIsImNvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwiZnJhbWUiLCJhc3BlY3RSYXRpbyIsIl9wcmVmcyIsImdldEludCIsInNjcm9sbEhvcml6VmFsIiwiX2FkZGl0aW9uYWxQYXJhbXMiLCJzY3JvbGxIb3Jpem9udGFsIiwic2Nyb2xsVmVydFZhbCIsInNjcm9sbFZlcnRpY2FsIiwiem9vbSIsInBhcnNlRmxvYXQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwic3R5bGUiLCJ2aXNpYmlsaXR5Iiwic2V0QXR0cmlidXRlIiwiZGlzcGxheSIsIl9sb2FkRnJhbWUiLCJoYXNQYXJhbXMiLCJ0ZXN0IiwiX3VybCIsInJhbmRvbU51bSIsIk1hdGgiLCJjZWlsIiwicmFuZG9tIiwicmVmcmVzaFVSTCIsIm9ubG9hZCIsInJlZnJlc2giLCJfaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwiX2FuaW1hdGVGcmFtZSIsImpRdWVyeSIsImNzcyIsInRvcCIsImxlZnQiLCJ3cGVYIiwic2Nyb2xsSG9yaXpvbnRhbEVuZCIsIndwZVkiLCJzY3JvbGxWZXJ0aWNhbEVuZCIsIndwZUQiLCJzY3JvbGxEdXJhdGlvbiIsIndwZVQiLCJzY3JvbGxUaW1lb3V0U3RhcnQiLCJhbmltYXRlZCIsImRlbGF5IiwiYW5pbWF0ZSIsIl91bmxvYWRGcmFtZSIsImNsZWFySW50ZXJ2YWwiLCJzcmMiLCJfcmVhZHkiLCJycGMiLCJjYWxsIiwiZ2V0U3RyaW5nIiwiX2JhY2tncm91bmRSZWFkeSIsInVybCIsImluZGV4T2YiLCJwYXVzZSIsInBsYXkiLCJzdG9wIiwic2V0QWRkaXRpb25hbFBhcmFtcyIsInBhcmFtcyIsIlByZWZzIiwiX2JhY2tncm91bmQiLCJDb21tb24iLCJCYWNrZ3JvdW5kIiwiaW5pdCIsImRhdGEiLCJfcmVmcmVzaFRpbWVyIiwic2V0VGltZW91dCIsImJhY2tncm91bmRJbWFnZSIsImJhY2tncm91bmQiLCJpbWFnZSIsIl9zZXBhcmF0b3IiLCJEYXRlIiwiZ2V0VGltZSIsIl9yZWZyZXNoRHVyYXRpb24iLCJ1c2VJbWFnZSIsIl9pc1N0b3JhZ2VGaWxlIiwiX2NhbGxiYWNrIiwiX2NvbmZpZ3VyZSIsInN0ciIsIl9zdG9yYWdlIiwiYm9keSIsImNvbG9yIiwiY2xhc3NOYW1lIiwicG9zaXRpb24iLCJzY2FsZSIsIk9iamVjdCIsImtleXMiLCJiYWNrZ3JvdW5kU3RvcmFnZSIsImxlbmd0aCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiZGV0YWlsIiwiZmlsZXMiLCJmb2xkZXIiLCJmaWxlTmFtZSIsImNvbXBhbnlJZCIsImdvIiwiY29uc29sZSIsImxvZyIsInNwbGl0IiwiY2IiLCJ3aW5kb3ciLCJhZGRpdGlvbmFsUGFyYW1zIiwibmFtZXMiLCJ2YWx1ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJKU09OIiwicGFyc2UiLCJwcmVmcyIsImlkIiwib25jb250ZXh0bWVudSIsInJlZ2lzdGVyIiwiX2dhcSIsInB1c2giLCJnYSIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwiYXN5bmMiLCJsb2NhdGlvbiIsInByb3RvY29sIiwicyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSJdLCJtYXBwaW5ncyI6IkFBRUEsR0FBc0IsbUJBQVhBLFFBQXdCLENBQ2pDLEdBQUlBLFVBSW1CLG9CQUFaQyxVQUNUQSxRQUFRQyxPQUFPLG9DQUNaQyxTQUFTLGlCQUFrQix3QkFDM0JBLFNBQVMsZ0JBQWlCLFNBTWpDLEdBQUlDLFlBQWFBLGNBQ2pCQSxZQUFXQyxXQUVYRCxXQUFXQyxRQUFVLFNBQVdDLEVBQVVDLEdBRXhDLFlBYUEsU0FBU0MsS0FDUCxH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SUFDaERFLE1BQU1DLFFBQVFGLElBQVdBLEVBQU9oQixPQUFTLEdBQzNDbkcsV0FBV0MsUUFBUW1FLG9CQUFvQmtELEtBQUtDLE1BQU1KLEVBQU8sS0F2Qi9ELEdBQUlLLEdBQVEsR0FBSXJILEdBQVFtRSxNQUN0Qm1ELEVBQUtELEVBQU0zRCxVQUFVLEtBR3ZCbUQsR0FBT1UsY0FBZ0IsV0FDckIsT0FBTyxHQXVCVFYsRUFBT1osaUJBQWlCLGdCQUFpQixXQUNuQ3FCLEdBQWEsS0FBUEEsSUFDUnRILEVBQVF3RCxJQUFJZ0UsU0FBUyxjQUFnQkYsRUFBSXZELEdBQ3pDL0QsRUFBUXdELElBQUlnRSxTQUFTLGVBQWlCRixFQUFJeEQsR0FDMUM5RCxFQUFRd0QsSUFBSWdFLFNBQVMsY0FBZ0JGLEVBQUl0RCxHQUV6Q2hFLEVBQVF3RCxJQUFJZ0UsU0FBUyxlQUFpQkYsRUFBSVIsR0FDMUM5RyxFQUFRd0QsSUFBSUMsS0FBSyxHQUFJLGNBQWUsS0FBTTZELEdBQUsseUJBSWxEVCxPQUFRN0csUUFLWCxJQUFJeUgsTUFBT0EsUUFFWEEsTUFBS0MsTUFBTSxjQUFlLGtCQUMxQkQsS0FBS0MsTUFBTSxtQkFFWCxXQUNFLEdBQUlDLEdBQUs1SCxTQUFTNkgsY0FBYyxTQUFXRCxHQUFHRSxLQUFPLGtCQUFtQkYsRUFBR0csT0FBUSxFQUNuRkgsRUFBR3JFLEtBQU8sVUFBWXZELFNBQVNnSSxTQUFTQyxTQUFXLGNBQWdCLGNBQWdCLDZCQUNuRixJQUFJQyxHQUFJbEksU0FBU21JLHFCQUFxQixVQUFVLEVBQUlELEdBQUVFLFdBQVdDLGFBQWFULEVBQUlNIiwiZmlsZSI6ImpzL3dpZGdldC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgY29uZmlnOiB0cnVlICovXHJcbi8qIGV4cG9ydGVkIGNvbmZpZyAqL1xyXG5pZiAodHlwZW9mIGNvbmZpZyA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gIHZhciBjb25maWcgPSB7XHJcbiAgICAvLyB2YXJpYWJsZXMgZ28gaGVyZVxyXG4gIH07XHJcblxyXG4gIGlmICh0eXBlb2YgYW5ndWxhciAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLmNvbW1vbi5pMThuLmNvbmZpZ1wiLCBbXSlcclxuICAgICAgLmNvbnN0YW50KFwiTE9DQUxFU19QUkVGSVhcIiwgXCJsb2NhbGVzL3RyYW5zbGF0aW9uX1wiKVxyXG4gICAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1NVRklYXCIsIFwiLmpzb25cIik7XHJcbiAgfVxyXG59XHJcblxyXG4vKiBnbG9iYWwgZ2FkZ2V0cyAqL1xyXG5cclxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xyXG5SaXNlVmlzaW9uLldlYlBhZ2UgPSB7fTtcclxuXHJcblJpc2VWaXNpb24uV2ViUGFnZSA9IChmdW5jdGlvbiAoZG9jdW1lbnQsIGdhZGdldHMpIHtcclxuXHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gIC8vIHByaXZhdGUgdmFyaWFibGVzXHJcbiAgdmFyIF9wcmVmcyA9IG51bGwsXHJcbiAgICBfYWRkaXRpb25hbFBhcmFtcyA9IHt9LFxyXG4gICAgX3VybCA9IFwiXCIsXHJcbiAgICBfaW50ZXJ2YWxJZCA9IG51bGwsXHJcbiAgICBfYmFja2dyb3VuZCA9IG51bGw7XHJcblxyXG4gIC8qXHJcbiAgICogIFByaXZhdGUgTWV0aG9kc1xyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBfY29uZmlndXJlUGFnZSgpIHtcclxuICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndlYnBhZ2UtY29udGFpbmVyXCIpLFxyXG4gICAgICBmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VicGFnZS1mcmFtZVwiKSxcclxuICAgICAgYXNwZWN0UmF0aW8gPSAgKF9wcmVmcy5nZXRJbnQoXCJyc0hcIikgLyBfcHJlZnMuZ2V0SW50KFwicnNXXCIpKSAqIDEwMCxcclxuICAgICAgc2Nyb2xsSG9yaXpWYWwgPSAoX2FkZGl0aW9uYWxQYXJhbXMuc2Nyb2xsSG9yaXpvbnRhbCA+IDApID8gX2FkZGl0aW9uYWxQYXJhbXMuc2Nyb2xsSG9yaXpvbnRhbCA6IDAsXHJcbiAgICAgIHNjcm9sbFZlcnRWYWwgPSAoX2FkZGl0aW9uYWxQYXJhbXMuc2Nyb2xsVmVydGljYWwgPiAwKSA/IF9hZGRpdGlvbmFsUGFyYW1zLnNjcm9sbFZlcnRpY2FsIDogMCxcclxuICAgICAgem9vbSA9IHBhcnNlRmxvYXQoX2FkZGl0aW9uYWxQYXJhbXMuem9vbSksIGJsb2NrZXIsIHpvb21TdHlsZSwgbWFyZ2luU3R5bGU7XHJcblxyXG4gICAgaWYgKGNvbnRhaW5lciAmJiBmcmFtZSkge1xyXG4gICAgICBibG9ja2VyID0gY29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJibG9ja2VyXCIpWzBdO1xyXG5cclxuICAgICAgLy8gSGlkaW5nIGlmcmFtZSBjb250YWluZXIsIHZpc2libGUgd2hlbiB0aGUgaWZyYW1lIHN1Y2Nlc3NmdWxseSBsb2Fkc1xyXG4gICAgICBjb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XHJcblxyXG4gICAgICAvLyBzZXQgdGhlIHBhZGRpbmctYm90dG9tIHdpdGggdGhlIGFzcGVjdCByYXRpbyAlIChyZXNwb25zaXZlKVxyXG4gICAgICBpZiAoc2Nyb2xsVmVydFZhbCAhPT0gMCkge1xyXG4gICAgICAgIC8vIHJlY2FsY3VsYXRlIGFzcGVjdCByYXRpb1xyXG4gICAgICAgIGFzcGVjdFJhdGlvICs9IChzY3JvbGxWZXJ0VmFsIC8gX3ByZWZzLmdldEludChcInJzV1wiKSkgKiAxMDA7XHJcbiAgICAgIH1cclxuICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwicGFkZGluZy1ib3R0b206XCIgKyBhc3BlY3RSYXRpbyArIFwiJVwiKTtcclxuXHJcbiAgICAgIC8vIENvbmZpZ3VyZSBpbnRlcmFjdGl2aXR5IG9mIGlmcmFtZVxyXG4gICAgICBibG9ja2VyLnN0eWxlLmRpc3BsYXkgPSAoX2FkZGl0aW9uYWxQYXJhbXMuaW50ZXJhY3RpdmUpID8gXCJub25lXCIgOiBcImJsb2NrXCI7XHJcbiAgICAgIGZyYW1lLnNldEF0dHJpYnV0ZShcInNjcm9sbGluZ1wiLFxyXG4gICAgICAgIChfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxiYXJzKSA/IFwieWVzXCIgOiBcIm5vXCIpO1xyXG5cclxuICAgICAgLy8gQ29uZmlndXJlIHRoZSB6b29tIChzY2FsZSkgc3R5bGluZ1xyXG4gICAgICB6b29tU3R5bGUgPSBcIi1tcy16b29tOlwiICsgem9vbSArIFwiO1wiICtcclxuICAgICAgICBcIi1tb3otdHJhbnNmb3JtOiBzY2FsZShcIiArIHpvb20gKyBcIik7XCIgK1xyXG4gICAgICAgIFwiLW1vei10cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XCIgK1xyXG4gICAgICAgIFwiLW8tdHJhbnNmb3JtOiBzY2FsZShcIiArIHpvb20gKyBcIik7XCIgK1xyXG4gICAgICAgIFwiLW8tdHJhbnNmb3JtLW9yaWdpbjogMCAwO1wiICtcclxuICAgICAgICBcIi13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZShcIiArIHpvb20gKyBcIik7XCIgK1xyXG4gICAgICAgIFwiLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XCI7XHJcblxyXG4gICAgICB6b29tU3R5bGUgKz0gXCJ3aWR0aDogXCIgKyAoKDEgLyB6b29tKSAqIDEwMCkgKyBcIiU7XCIgK1xyXG4gICAgICBcImhlaWdodDogXCIgKyAoKDEgLyB6b29tKSAqIDEwMCkgKyBcIiU7XCI7XHJcblxyXG4gICAgICAvLyBBcHBseSB0aGUgem9vbSAoc2NhbGUpIG9uIHRoZSBpZnJhbWVcclxuICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgem9vbVN0eWxlKTtcclxuXHJcbiAgICAgIGlmIChzY3JvbGxIb3JpelZhbCAhPT0gMCB8fCBzY3JvbGxWZXJ0VmFsICE9PSAwKSB7XHJcbiAgICAgICAgLy8gQ29uZmlndXJlIHRoZSBtYXJnaW4gc3R5bGluZ1xyXG4gICAgICAgIG1hcmdpblN0eWxlID0gXCJtYXJnaW46IFwiICsgXCItXCIgKyBzY3JvbGxWZXJ0VmFsICsgXCJweCAwIDAgLVwiICtcclxuICAgICAgICAgIHNjcm9sbEhvcml6VmFsICsgXCJweDtcIjtcclxuXHJcbiAgICAgICAgLyogQXBwbHkgdGhlIG1hcmdpbiBzdHlsaW5nIG9uIHRoZSBpZnJhbWUgd2hpbGUgbWFpbnRhaW5pbmdcclxuICAgICAgICAgdGhlIHpvb20gc3R5bGluZyAqL1xyXG4gICAgICAgIGZyYW1lLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIHpvb21TdHlsZSArIG1hcmdpblN0eWxlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gX2xvYWRGcmFtZSgpIHtcclxuICAgIHZhciBmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VicGFnZS1mcmFtZVwiKSxcclxuICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZWJwYWdlLWNvbnRhaW5lclwiKSxcclxuICAgICAgaGFzUGFyYW1zID0gL1s/IyZdLy50ZXN0KF91cmwpLFxyXG4gICAgICByYW5kb21OdW0gPSBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDEwMCksXHJcbiAgICAgIHJlZnJlc2hVUkwgPSBoYXNQYXJhbXMgP1xyXG4gICAgICAgICAgX3VybCArIFwiJmR1bW15VmFyPVwiICsgcmFuZG9tTnVtIDpcclxuICAgICAgICAgIF91cmwgKyBcIj9kdW1teVZhcj1cIiArIHJhbmRvbU51bTtcclxuXHJcbiAgICBpZiAoY29udGFpbmVyICYmIGZyYW1lKSB7XHJcbiAgICAgIGZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmcmFtZS5vbmxvYWQgPSBudWxsO1xyXG5cclxuICAgICAgICAvLyBTaG93IHRoZSBpZnJhbWUgY29udGFpbmVyXHJcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcclxuXHJcbiAgICAgICAgLy8gUnVuIHNldEludGVydmFsIHRvIHJlbG9hZCBwYWdlIGJhc2VkIG9uIHRoZSBkYXRhIHJlZnJlc2ggdmFsdWVcclxuICAgICAgICBpZiAoX2FkZGl0aW9uYWxQYXJhbXMucmVmcmVzaCA+IDAgJiYgX2ludGVydmFsSWQgPT09IG51bGwpIHtcclxuICAgICAgICAgIF9pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfbG9hZEZyYW1lKCk7XHJcbiAgICAgICAgICB9LCBfYWRkaXRpb25hbFBhcmFtcy5yZWZyZXNoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgcmVmcmVzaFVSTCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBfYW5pbWF0ZUZyYW1lKCkge1xyXG5cdC8vIFJlc2V0IHBvc2l0aW9uXHJcbiAgICBqUXVlcnkoXCIjd2VicGFnZS1mcmFtZVwiKS5jc3Moe3RvcDowLCBsZWZ0OjB9KTtcclxuXHR2YXIgd3BlWCA9IChfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxIb3Jpem9udGFsRW5kID4gMCkgPyBfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxIb3Jpem9udGFsRW5kIDogMDtcclxuXHR2YXIgd3BlWSA9IChfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxWZXJ0aWNhbEVuZCA+IDApID8gX2FkZGl0aW9uYWxQYXJhbXMuc2Nyb2xsVmVydGljYWxFbmQgOiAwO1xyXG5cdHZhciB3cGVEID0gKF9hZGRpdGlvbmFsUGFyYW1zLnNjcm9sbER1cmF0aW9uID4gMCkgPyBfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxEdXJhdGlvbiA6IDA7XHJcblx0dmFyIHdwZVQgPSAoX2FkZGl0aW9uYWxQYXJhbXMuc2Nyb2xsVGltZW91dFN0YXJ0ID4gMCkgPyBfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxUaW1lb3V0U3RhcnQgOiAwO1xyXG5cdFxyXG5cdC8vIFN0YXJ0IGFuaW1hdGlvblxyXG5cdGlmIChfYWRkaXRpb25hbFBhcmFtcy5hbmltYXRlZCAmJiAod3BlWD4wIHx8IHdwZVk+MCApKSB7XHJcblx0XHR3cGVYID0gXCItPVwiICsgd3BlWDtcclxuXHRcdHdwZVkgPSBcIi09XCIgKyB3cGVZO1xyXG5cdFx0aWYgKHdwZVQgPiAwKSB7XHJcblx0XHRcdGpRdWVyeShcIiN3ZWJwYWdlLWZyYW1lXCIpLmRlbGF5KHdwZVQpLmFuaW1hdGUoeyB0b3A6IHdwZVksIGxlZnQ6IHdwZVggfSwgd3BlRCApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0alF1ZXJ5KFwiI3dlYnBhZ2UtZnJhbWVcIikuYW5pbWF0ZSh7IHRvcDogd3BlWSwgbGVmdDogd3BlWCB9LCB3cGVEICk7XHJcblx0XHR9XHJcblx0fVxyXG4gIH1cclxuICBcclxuICBmdW5jdGlvbiBfdW5sb2FkRnJhbWUoKSB7XHJcbiAgICB2YXIgZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndlYnBhZ2UtZnJhbWVcIik7XHJcblxyXG4gICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnJlZnJlc2ggPiAwKSB7XHJcbiAgICAgIGNsZWFySW50ZXJ2YWwoX2ludGVydmFsSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChmcmFtZSkge1xyXG4gICAgICBmcmFtZS5zcmMgPSBcImFib3V0OmJsYW5rXCI7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gX3JlYWR5KCkge1xyXG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfcmVhZHlcIiwgbnVsbCwgX3ByZWZzLmdldFN0cmluZyhcImlkXCIpLFxyXG4gICAgICB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCBmYWxzZSk7XHQgIFxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gX2JhY2tncm91bmRSZWFkeSgpIHtcclxuICAgIC8vIENvbmZpZ3VyZSB0aGUgdmFsdWUgZm9yIF91cmxcclxuICAgIF91cmwgPSBfYWRkaXRpb25hbFBhcmFtcy51cmw7XHJcblxyXG4gICAgLy8gQWRkIGh0dHA6Ly8gaWYgbm8gcHJvdG9jb2wgcGFyYW1ldGVyIGV4aXN0c1xyXG4gICAgaWYgKF91cmwuaW5kZXhPZihcIjovL1wiKSA9PT0gLTEpIHtcclxuICAgICAgX3VybCA9IFwiaHR0cDovL1wiICsgX3VybDtcclxuICAgIH1cclxuXHRcclxuICAgIF9jb25maWd1cmVQYWdlKCk7XHJcbiAgICBfcmVhZHkoKTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogIFB1YmxpYyBNZXRob2RzXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xyXG4gICAgX3VubG9hZEZyYW1lKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBwbGF5KCkge1xyXG4gICAgX2xvYWRGcmFtZSgpO1xyXG5cdF9hbmltYXRlRnJhbWUoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XHJcbiAgICBfdW5sb2FkRnJhbWUoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldEFkZGl0aW9uYWxQYXJhbXMocGFyYW1zKSB7XHJcbiAgICBfcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpO1xyXG4gICAgX2FkZGl0aW9uYWxQYXJhbXMgPSBwYXJhbXM7XHJcblxyXG4gICAgLy8gY3JlYXRlIGFuZCBpbml0aWFsaXplIHRoZSBCYWNrZ3JvdW5kIGluc3RhbmNlXHJcbiAgICBfYmFja2dyb3VuZCA9IG5ldyBSaXNlVmlzaW9uLkNvbW1vbi5CYWNrZ3JvdW5kKF9hZGRpdGlvbmFsUGFyYW1zKTtcclxuICAgIF9iYWNrZ3JvdW5kLmluaXQoX2JhY2tncm91bmRSZWFkeSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgc2V0QWRkaXRpb25hbFBhcmFtczogc2V0QWRkaXRpb25hbFBhcmFtcyxcclxuICAgIHBhdXNlOiBwYXVzZSxcclxuICAgIHBsYXk6IHBsYXksXHJcbiAgICBzdG9wOiBzdG9wXHJcbiAgfTtcclxuXHJcbn0pKGRvY3VtZW50LCBnYWRnZXRzKTtcclxuXHJcbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcclxuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcclxuXHJcblJpc2VWaXNpb24uQ29tbW9uLkJhY2tncm91bmQgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICB2YXIgX2NhbGxiYWNrID0gbnVsbCxcclxuICAgIF9yZWFkeSA9IGZhbHNlLFxyXG4gICAgX2JhY2tncm91bmQgPSBudWxsLFxyXG4gICAgX3N0b3JhZ2UgPSBudWxsLFxyXG4gICAgX3JlZnJlc2hEdXJhdGlvbiA9IDkwMDAwMCwgLy8gMTUgbWludXRlc1xyXG4gICAgX2lzU3RvcmFnZUZpbGUgPSBmYWxzZSxcclxuICAgIF9zZXBhcmF0b3IgPSBcIlwiO1xyXG5cclxuICAvKlxyXG4gICAqIFByaXZhdGUgTWV0aG9kc1xyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIF9yZWZyZXNoVGltZXIoKSB7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIGJhY2tncm91bmRSZWZyZXNoKCkge1xyXG4gICAgICBfYmFja2dyb3VuZC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybChcIiArIGRhdGEuYmFja2dyb3VuZC5pbWFnZS51cmwgKyBfc2VwYXJhdG9yICsgXCJjYj1cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgXCIpXCI7XHJcbiAgICAgIF9yZWZyZXNoVGltZXIoKTtcclxuICAgIH0sIF9yZWZyZXNoRHVyYXRpb24pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gX2JhY2tncm91bmRSZWFkeSgpIHtcclxuICAgIF9yZWFkeSA9IHRydWU7XHJcblxyXG4gICAgaWYgKGRhdGEuYmFja2dyb3VuZC51c2VJbWFnZSAmJiAhX2lzU3RvcmFnZUZpbGUpIHtcclxuICAgICAgLy8gc3RhcnQgdGhlIHJlZnJlc2ggcG9sbCBmb3Igbm9uLXN0b3JhZ2UgYmFja2dyb3VuZCBpbWFnZVxyXG4gICAgICBfcmVmcmVzaFRpbWVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKF9jYWxsYmFjayAmJiB0eXBlb2YgX2NhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgX2NhbGxiYWNrKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBfY29uZmlndXJlKCkge1xyXG4gICAgdmFyIHN0cjtcclxuXHJcbiAgICBfYmFja2dyb3VuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFja2dyb3VuZFwiKTtcclxuICAgIF9zdG9yYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrZ3JvdW5kU3RvcmFnZVwiKTtcclxuXHJcbiAgICAvLyBzZXQgdGhlIGRvY3VtZW50IGJhY2tncm91bmRcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZCA9IGRhdGEuYmFja2dyb3VuZC5jb2xvcjtcclxuXHJcbiAgICBpZiAoX2JhY2tncm91bmQpIHtcclxuICAgICAgaWYgKGRhdGEuYmFja2dyb3VuZC51c2VJbWFnZSkge1xyXG4gICAgICAgIF9iYWNrZ3JvdW5kLmNsYXNzTmFtZSA9IGRhdGEuYmFja2dyb3VuZC5pbWFnZS5wb3NpdGlvbjtcclxuICAgICAgICBfYmFja2dyb3VuZC5jbGFzc05hbWUgPSBkYXRhLmJhY2tncm91bmQuaW1hZ2Uuc2NhbGUgPyBfYmFja2dyb3VuZC5jbGFzc05hbWUgKyBcIiBzY2FsZS10by1maXRcIlxyXG4gICAgICAgICAgOiBfYmFja2dyb3VuZC5jbGFzc05hbWU7XHJcblxyXG4gICAgICAgIF9pc1N0b3JhZ2VGaWxlID0gKE9iamVjdC5rZXlzKGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UpLmxlbmd0aCAhPT0gMCk7XHJcblxyXG4gICAgICAgIGlmICghX2lzU3RvcmFnZUZpbGUpIHtcclxuICAgICAgICAgIHN0ciA9IGRhdGEuYmFja2dyb3VuZC5pbWFnZS51cmwuc3BsaXQoXCI/XCIpO1xyXG5cclxuICAgICAgICAgIC8vIHN0b3JlIHRoaXMgZm9yIHRoZSByZWZyZXNoIHRpbWVyXHJcbiAgICAgICAgICBfc2VwYXJhdG9yID0gKHN0ci5sZW5ndGggPT09IDEpID8gXCI/XCIgOiBcIiZcIjtcclxuXHJcbiAgICAgICAgICBfYmFja2dyb3VuZC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybChcIiArIGRhdGEuYmFja2dyb3VuZC5pbWFnZS51cmwgKyBcIilcIjtcclxuICAgICAgICAgIF9iYWNrZ3JvdW5kUmVhZHkoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKF9zdG9yYWdlKSB7XHJcbiAgICAgICAgICAgIC8vIFJpc2UgU3RvcmFnZVxyXG4gICAgICAgICAgICBfc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGUuZGV0YWlsICYmIGUuZGV0YWlsLmZpbGVzICYmIGUuZGV0YWlsLmZpbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIF9iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgZS5kZXRhaWwuZmlsZXNbMF0udXJsICsgXCIpXCI7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBpZiAoIV9yZWFkeSkge1xyXG4gICAgICAgICAgICAgICAgX2JhY2tncm91bmRSZWFkeSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBfc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgZGF0YS5iYWNrZ3JvdW5kU3RvcmFnZS5mb2xkZXIpO1xyXG4gICAgICAgICAgICBfc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmaWxlTmFtZVwiLCBkYXRhLmJhY2tncm91bmRTdG9yYWdlLmZpbGVOYW1lKTtcclxuICAgICAgICAgICAgX3N0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiY29tcGFueUlkXCIsIGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UuY29tcGFueUlkKTtcclxuICAgICAgICAgICAgX3N0b3JhZ2UuZ28oKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTWlzc2luZyBlbGVtZW50IHdpdGggaWQgdmFsdWUgb2YgJ2JhY2tncm91bmRTdG9yYWdlJ1wiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgX2JhY2tncm91bmRSZWFkeSgpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIk1pc3NpbmcgZWxlbWVudCB3aXRoIGlkIHZhbHVlIG9mICdiYWNrZ3JvdW5kJ1wiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogIFB1YmxpYyBNZXRob2RzXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gaW5pdChjYikge1xyXG4gICAgaWYgKCFfcmVhZHkpIHtcclxuICAgICAgaWYgKGNiKSB7XHJcbiAgICAgICAgX2NhbGxiYWNrID0gY2I7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIF9jb25maWd1cmUoKTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgIGNiKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgXCJpbml0XCI6IGluaXRcclxuICB9O1xyXG59O1xyXG5cclxuLyogZ2xvYmFsIFJpc2VWaXNpb24sIGdhZGdldHMgKi9cclxuXHJcbihmdW5jdGlvbiAod2luZG93LCBnYWRnZXRzKSB7XHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gIHZhciBwcmVmcyA9IG5ldyBnYWRnZXRzLlByZWZzKCksXHJcbiAgICBpZCA9IHByZWZzLmdldFN0cmluZyhcImlkXCIpO1xyXG5cclxuICAvLyBEaXNhYmxlIGNvbnRleHQgbWVudSAocmlnaHQgY2xpY2sgbWVudSlcclxuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBwbGF5KCkge1xyXG4gICAgUmlzZVZpc2lvbi5XZWJQYWdlLnBsYXkoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xyXG4gICAgUmlzZVZpc2lvbi5XZWJQYWdlLnBhdXNlKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzdG9wKCkge1xyXG4gICAgUmlzZVZpc2lvbi5XZWJQYWdlLnN0b3AoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFkZGl0aW9uYWxQYXJhbXMobmFtZXMsIHZhbHVlcykge1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZXMpICYmIG5hbWVzLmxlbmd0aCA+IDAgJiYgbmFtZXNbMF0gPT09IFwiYWRkaXRpb25hbFBhcmFtc1wiKSB7XHJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBSaXNlVmlzaW9uLldlYlBhZ2Uuc2V0QWRkaXRpb25hbFBhcmFtcyhKU09OLnBhcnNlKHZhbHVlc1swXSkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvbHltZXItcmVhZHlcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoaWQgJiYgaWQgIT09IFwiXCIpIHtcclxuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9wbGF5X1wiICsgaWQsIHBsYXkpO1xyXG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcclxuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9zdG9wX1wiICsgaWQsIHN0b3ApO1xyXG5cclxuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBhZGRpdGlvbmFsUGFyYW1zKTtcclxuICAgICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBbXCJhZGRpdGlvbmFsUGFyYW1zXCJdKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbn0pKHdpbmRvdywgZ2FkZ2V0cyk7XHJcblxyXG5cclxuXHJcbi8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cclxudmFyIF9nYXEgPSBfZ2FxIHx8IFtdO1xyXG5cclxuX2dhcS5wdXNoKFsnX3NldEFjY291bnQnLCAnVUEtNTcwOTIxNTktNiddKTtcclxuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XHJcblxyXG4oZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlO1xyXG4gIGdhLnNyYyA9ICgnaHR0cHM6JyA9PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICdodHRwczovL3NzbCcgOiAnaHR0cDovL3d3dycpICsgJy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyc7XHJcbiAgdmFyIHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07IHMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZ2EsIHMpO1xyXG59KSgpO1xyXG4vKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=